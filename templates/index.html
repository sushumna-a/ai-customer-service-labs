<!DOCTYPE html>
<html>
<head>
    <title>AI Customer Service</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
<div class="container mt-4">
    <h2 class="mb-4">AI-Powered Customer Service</h2>
    <ul class="nav nav-tabs" id="tabMenu" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="chat-tab" data-bs-toggle="tab" data-bs-target="#chat" type="button" role="tab">Chat</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="faq-tab" data-bs-toggle="tab" data-bs-target="#faq" type="button" role="tab">FAQs</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="analytics-tab" data-bs-toggle="tab" data-bs-target="#analytics" type="button" role="tab">Analytics</button>
        </li>
    </ul>
    <div class="tab-content p-3 border-bottom border-start border-end">
        <!-- Chat Sheet -->
        <div class="tab-pane fade show active" id="chat" role="tabpanel">
            <div id="chat-box" class="mb-3" style="height:320px; overflow-y:auto; border:1px solid #ddd; padding:12px; background:#fafbfc;"></div>
            <div class="input-group mb-2">
                <input type="text" id="user-input" class="form-control" placeholder="Type your query..." autofocus>
                <button class="btn btn-primary" onclick="sendQuery()">Send</button>
            </div>
            <div class="mb-2">
                <button class="btn btn-outline-secondary btn-sm" onclick="quickQuery('What is my account balance?')">Balance Inquiry</button>
                <button class="btn btn-outline-secondary btn-sm" onclick="quickQuery('I want to dispute a transaction.')">Dispute Transaction</button>
                <button class="btn btn-outline-secondary btn-sm" onclick="quickQuery('How can I apply for a loan?')">Loan Info</button>
                <button class="btn btn-outline-secondary btn-sm" onclick="quickQuery('Show my last five transactions.')">Recent Transactions</button>
                <button class="btn btn-outline-secondary btn-sm" onclick="quickQuery('Report a lost credit card.')">Lost Card</button>
            </div>
        </div>
        <!-- FAQ Sheet -->
        <div class="tab-pane fade" id="faq" role="tabpanel">
            <h5>Frequently Asked Questions</h5>
            <ul>
                {% for faq in faqs %}
                    <li>
                        <a href="{{ url_for('faq_detail', faq_id=faq.id) }}">{{ faq.question }}</a>
                    </li>
                {% endfor %}
            </ul>
        </div>
        <!-- Analytics Sheet -->
        <div class="tab-pane fade" id="analytics" role="tabpanel">
            <h5>Session Analytics</h5>
            <div id="analytics-content">
                <p>Total Queries: <span id="total-queries">0</span></p>
                <p>Most Recent Intent: <span id="recent-intent">None</span></p>
            </div>
        </div>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
